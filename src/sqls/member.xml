<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="Member">

	<select id="confirmId" parameterType="bit.com.inpho.dto.MemberDto" resultType="bit.com.inpho.dto.MemberDto">
		SELECT USER_EMAIL,AUTH FROM MEMBER WHERE USER_EMAIL = #{user_email}
	</select>
	
	<insert id="registerMemberHomePage" parameterType="bit.com.inpho.dto.MemberDto">
		INSERT INTO MEMBER VALUES(SEQ_USER.NEXTVAL, #{user_email},0,#{user_password},#{user_nickname},SYSDATE,'default','',#{provider})
	</insert>
	
	<select id="userLogin" parameterType="bit.com.inpho.dto.MemberDto" resultType="bit.com.inpho.dto.MemberDto">
		SELECT USER_SEQ, USER_EMAIL, AUTH, USER_NICKNAME, USER_CREATE, PROFILE_IMAGE, PROVIDER FROM MEMBER WHERE USER_EMAIL=#{user_email} AND USER_PASSWORD=#{user_password}
	</select>
	
	<select id="userSocialLogin" parameterType="bit.com.inpho.dto.MemberDto" resultType="bit.com.inpho.dto.MemberDto">
		SELECT USER_SEQ, USER_EMAIL, AUTH, USER_NICKNAME, USER_CREATE, PROFILE_IMAGE, PROVIDER FROM MEMBER WHERE USER_EMAIL=#{user_email} AND PROVIDER=#{provider}
	</select>
	
	<insert id="registerSocialMember" parameterType="bit.com.inpho.dto.MemberDto">
		INSERT INTO MEMBER VALUES(SEQ_USER.NEXTVAL, #{user_email}, 0, #{user_password}, #{user_nickname},SYSDATE, #{profile_image},'', #{provider})
	</insert>
</mapper>
